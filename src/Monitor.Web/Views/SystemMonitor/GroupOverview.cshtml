@model dynamic

@{
    ViewBag.Title = "Overview";
}

<section class="groupoverview" id="monitorBody">
    
    <div class="controls">
        <input type="checkbox" id="toggleButtonIterateTabs" /><label for="toggleButtonIterateTabs">Iterate</label>
    </div>

    <div id="tabs">
        <ul data-bind="foreach: machineGroups">
            <li>
                <a data-bind="attr: { href: '#tabs-' +  groupName() , title: groupName }, text:  groupName "></a>
            </li>
        </ul>

        <div data-bind="foreach: machineGroups">
            <div data-bind="foreach: monitorMachines, attr: { 'id': 'tabs-' +  groupName() }">
                
                <div class="machine" data-bind="attr: { 'id': machineName }">
                    <span data-bind="text: machineName"></span>
                </div>

            </div>
        </div>
    </div>

</section>


@section CustomScripts {

    <script src="@Links.Scripts.monitoring_config_js" type="text/javascript"></script>
    <script type="text/javascript">
        $.ajaxSetup({ cache: false });

        var ConfigurationUrls = {
            LoadConfig: 'api/groupconfiguration/get'
        };

        $(function () {
            configViewModel = new MachineGroupingModel();
            configViewModel.loadConfigViewModelComplete = function () {
                $("#tabs").tabs();
                $("#toggleButtonIterateTabs").button().click(function () {
                    configViewModel.iterateAutomatic();
                });
            };
            configViewModel.loadConfigViewModel();

            ko.applyBindings(configViewModel, document.getElementById('monitorBody'));
        });
    </script>

}